<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.0</version>
    <date>2024-02-06T19:38:26Z</date>
    <groups>
        <group>
            <name>LSI</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template LSI JSON LLD</template>
            <name>Template LSI JSON LLD</name>
            <groups>
                <group>
                    <name>LSI</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>LSI battery</name>
                </application>
                <application>
                    <name>LSI controllers</name>
                </application>
                <application>
                    <name>LSI Internal items</name>
                </application>
                <application>
                    <name>LSI Logical disks</name>
                </application>
                <application>
                    <name>LSI Physical disks</name>
                </application>
                <application>
                    <name>Temp</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Logical disks info</name>
                    <key>lsi.ld.info</key>
                    <delay>{$LD_DISCOVERY_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PERIOD}</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Physical disks info</name>
                    <key>lsi.pd.info</key>
                    <delay>{$PD_DISCOVERY_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PERIOD}</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Physical disks NE info</name>
                    <key>lsi.pd.ne.info</key>
                    <delay>{$PD_DISCOVERY_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PERIOD}</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>NE=No Enclosure&#13;
Disks without Enclosure or Backplane</description>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Controllers discovery</name>
                    <key>lsi.ctl.info</key>
                    <delay>{$ADAP_DISCOVERY_PERIOD}</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu absolute state of charge</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.a.s.charge[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>{$BATTERY_TREND_PERIOD}</trends>
                            <units>%</units>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Capacity_Info'][?(@.Property=='Absolute State of charge')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <params>%
</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu cycle count</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.c.count[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>{$BATTERY_TREND_PERIOD}</trends>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Capacity_Info'][?(@.Property=='Cycle Count')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu design capacity</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.d.capacity[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Design_Info'][?(@.Property=='Design Capacity')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu design voltage</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.d.voltage[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Design_Info'][?(@.Property=='Design Voltage')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu date of manufacture</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.date.man[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Design_Info'][?(@.Property=='Date of Manufacture')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu full charge capacity</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.f.capacity[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>{$BATTERY_TREND_PERIOD}</trends>
                            <units>mAh</units>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Capacity_Info'][?(@.Property=='Full Charge Capacity')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <params>mAh
</params>
                                </step>
                                <step>
                                    <type>TRIM</type>
                                    <params><![CDATA[ ]]></params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu info</name>
                            <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            <delay>{$BATTERY_REQUEST_PERIOD}</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI Internal items</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]</params>
                                </step>
                                <step>
                                    <type>CHECK_REGEX_ERROR</type>
                                    <params>(&quot;Status&quot;\s:\s&quot;Failure&quot;)
\1</params>
                                    <error_handler>DISCARD_VALUE</error_handler>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Response Data']</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu remaining capacity low</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.lowcharge[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Firmware_Status'][?(@.Property=='Remaining Capacity Low')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(No)}=0 and {strlen()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} battery charge level is low</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu remaining capacity</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.r.capacity[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>{$BATTERY_TREND_PERIOD}</trends>
                            <units>mAh</units>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Capacity_Info'][?(@.Property=='Remaining Capacity')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <params>mAh
</params>
                                </step>
                                <step>
                                    <type>TRIM</type>
                                    <params><![CDATA[ ]]></params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu relative state of charge</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.r.s.charge[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>{$BATTERY_TREND_PERIOD}</trends>
                            <units>%</units>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Capacity_Info'][?(@.Property=='Relative State of Charge')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <params>%
</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu need to replace</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.replace[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Firmware_Status'][?(@.Property=='Replacement required')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(No)}=0 and {strlen()}&gt;0)</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} bbu battery is need to be replaced</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu serial number</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.sn[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Design_Info'][?(@.Property=='Serial Number')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({diff()}=1 and {strlen()}&gt;0)</expression>
                                    <recovery_mode>NONE</recovery_mode>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} bbu battery was replaced</name>
                                    <priority>INFO</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu state</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.state[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Info'][?(@.Property=='Battery State')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(Optimal)}=0 and {strlen()}&gt;0)</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} bbu battery state is {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu temp state</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.temp.s[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Firmware_Status'][?(@.Property=='Temperature')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(OK)}=0 and {strlen()}&gt;0)</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} bbu temp state {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu temp</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.temp[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>{$BATTERY_TREND_PERIOD}</trends>
                            <value_type>FLOAT</value_type>
                            <units>°C</units>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                                <application>
                                    <name>Temp</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Info'][?(@.Property=='Temperature')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <params>C
</params>
                                </step>
                                <step>
                                    <type>TRIM</type>
                                    <params><![CDATA[ ]]></params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_BBU_TEMP_AVERAGE}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} BBU temp is {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>{HOST.NAME}: LSI controller {#CTLID} BBU temp is {ITEM.LASTVALUE}</name>
                                            <expression>{Template LSI JSON LLD:lsi.ctl.bbu.temp[&quot;{#CTLID}&quot;].last(#1)}&gt;{$ADAP_BBU_TEMP_CRIT}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_BBU_TEMP_CRIT}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} BBU temp is {ITEM.LASTVALUE}</name>
                                    <priority>HIGH</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_BBU_TEMP_WARNING}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} BBU temp is {ITEM.LASTVALUE}</name>
                                    <priority>WARNING</priority>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>{HOST.NAME}: LSI controller {#CTLID} BBU temp is {ITEM.LASTVALUE}</name>
                                            <expression>{Template LSI JSON LLD:lsi.ctl.bbu.temp[&quot;{#CTLID}&quot;].last(#1)}&gt;{$ADAP_BBU_TEMP_AVERAGE}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu type</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.type[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Info'][?(@.Property=='Type')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu voltage state</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu.voltage.s[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no BBU (Battery Backup Unit) installed or CV (Cache Vault) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['BBU_Firmware_Status'][?(@.Property=='Voltage')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.bbu.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(OK)}=0 and {strlen()}&gt;0)</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} bbu voltage state {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; BBU</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.bbu[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['HwCfg']['BBU']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(Present)}=0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{str(Present)}=1</recovery_expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} BBU is {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache size</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cache[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['HwCfg']['CacheVault Flash Size']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault module date of manufacture</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cv.date.man[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Design_Info'][?(@.Property=='Date of Manufacture')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault info</name>
                            <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            <delay>{$BATTERY_REQUEST_PERIOD}</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI Internal items</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]</params>
                                </step>
                                <step>
                                    <type>CHECK_REGEX_ERROR</type>
                                    <params>(&quot;Status&quot;\s:\s&quot;Failure&quot;)
\1</params>
                                    <error_handler>DISCARD_VALUE</error_handler>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Response Data']</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault module version</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cv.module.version[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Design_Info'][?(@.Property=='Module Version')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault need to replace</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cv.replace[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Firmware_Status'][?(@.Property=='Replacement required')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(No)}=0 and {strlen()}&gt;0)</expression>
                                    <name>{HOST.NAME} LSI controller {#CTLID} cachevault battery is need to be replaced</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault serial number</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cv.sn[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Design_Info'][?(@.Property=='Serial Number')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({diff()}=1 and {strlen()}&gt;0)</expression>
                                    <recovery_mode>NONE</recovery_mode>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} cachevault battery was replaced</name>
                                    <priority>INFO</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault state</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cv.state[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Cachevault_Info'][?(@.Property=='State')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(Optimal)}=0 and {strlen()}&gt;0)</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} cachevault battery state is {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault temp</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cv.temp[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>{$BATTERY_TREND_PERIOD}</trends>
                            <value_type>FLOAT</value_type>
                            <units>°C</units>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                                <application>
                                    <name>Temp</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Cachevault_Info'][?(@.Property=='Temperature')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <params>C
</params>
                                </step>
                                <step>
                                    <type>TRIM</type>
                                    <params><![CDATA[ ]]></params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_CACHE_TEMP_AVERAGE}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} cachevault battery temp is {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>{HOST.NAME}: LSI controller {#CTLID} cachevault battery temp is {ITEM.LASTVALUE} (HW)</name>
                                            <expression>{Template LSI JSON LLD:lsi.ctl.cv.temp[&quot;{#CTLID}&quot;].last(#1)}&gt;{$ADAP_CACHE_TEMP_CRIT}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_CACHE_TEMP_WARNING}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} cachevault battery temp is {ITEM.LASTVALUE}</name>
                                    <priority>WARNING</priority>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>{HOST.NAME}: LSI controller {#CTLID} cachevault battery temp is {ITEM.LASTVALUE}</name>
                                            <expression>{Template LSI JSON LLD:lsi.ctl.cv.temp[&quot;{#CTLID}&quot;].last(#1)}&gt;{$ADAP_CACHE_TEMP_AVERAGE}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_CACHE_TEMP_CRIT}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} cachevault battery temp is {ITEM.LASTVALUE} (HW)</name>
                                    <priority>HIGH</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault type</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.cv.type[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$BATTERY_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Can be discarded if no CV (Cache Vault) installed or BBU (Battery Backup Unit) used instead.</description>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Cachevault_Info'][?(@.Property=='Type')].Value</params>
                                </step>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$[0]</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.cv.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; info</name>
                            <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            <delay>{$ADAP_REQUEST_PERIOD}</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Internal items</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; memory size</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.memory[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['HwCfg']['On Board Memory Size']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; model</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.model[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Basics']['Model']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; ROC temp</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.roctemp[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>{$ADAP_TREND_PERIOD}</trends>
                            <value_type>FLOAT</value_type>
                            <units>°C</units>
                            <description>Can be discarded if if there is no ROC temperature sensor.</description>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                                <application>
                                    <name>Temp</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['HwCfg']['ROC temperature(Degree Celsius)']</params>
                                    <error_handler>DISCARD_VALUE</error_handler>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_ROC_TEMP_AVERAGE}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} ROC temp is {ITEM.LASTVALUE}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>{HOST.NAME}: LSI controller {#CTLID} ROC temp is {ITEM.LASTVALUE}</name>
                                            <expression>{Template LSI JSON LLD:lsi.ctl.roctemp[&quot;{#CTLID}&quot;].last(#1)}&gt;{$ADAP_ROC_TEMP_CRIT}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_ROC_TEMP_CRIT}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} ROC temp is {ITEM.LASTVALUE}</name>
                                    <priority>HIGH</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last(#1)}&gt;{$ADAP_ROC_TEMP_WARNING}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} ROC temp is {ITEM.LASTVALUE}</name>
                                    <priority>WARNING</priority>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>{HOST.NAME}: LSI controller {#CTLID} ROC temp is {ITEM.LASTVALUE}</name>
                                            <expression>{Template LSI JSON LLD:lsi.ctl.roctemp[&quot;{#CTLID}&quot;].last(#1)}&gt;{$ADAP_ROC_TEMP_AVERAGE}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; serial number</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.sn[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Basics']['Serial Number']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{diff()}=1 and {strlen()}&gt;0</expression>
                                    <recovery_mode>NONE</recovery_mode>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} was replaced</name>
                                    <priority>INFO</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; state (health)</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ctl.state[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Status']['Controller Status']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ctl.info[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(Opt)}=0 and {str(OK)}=0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{str(Opt)}=1 or {str(OK)}=1</recovery_expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} status is {ITEM.LASTVALUE} (HW)</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; ld info</name>
                            <key>lsi.ld.info[&quot;{#CTLID}&quot;]</key>
                            <delay>{$LD_REQUEST_PERIOD}</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Internal items</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; pd info</name>
                            <key>lsi.pd.info[&quot;{#CTLID}&quot;]</key>
                            <delay>{$PD_REQUEST_PERIOD}</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Internal items</name>
                                </application>
                            </applications>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Controller &quot;{#CTLID}&quot; BBU charge capacity</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>A54F10</color>
                                    <item>
                                        <host>Template LSI JSON LLD</host>
                                        <key>lsi.ctl.bbu.f.capacity[&quot;{#CTLID}&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>FC6EA3</color>
                                    <item>
                                        <host>Template LSI JSON LLD</host>
                                        <key>lsi.ctl.bbu.r.capacity[&quot;{#CTLID}&quot;]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Controller &quot;{#CTLID}&quot; BBU state of charge</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>1A7C11</color>
                                    <item>
                                        <host>Template LSI JSON LLD</host>
                                        <key>lsi.ctl.bbu.a.s.charge[&quot;{#CTLID}&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>F63100</color>
                                    <item>
                                        <host>Template LSI JSON LLD</host>
                                        <key>lsi.ctl.bbu.r.s.charge[&quot;{#CTLID}&quot;]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Controller &quot;{#CTLID}&quot; temp</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>F63100</color>
                                    <item>
                                        <host>Template LSI JSON LLD</host>
                                        <key>lsi.ctl.roctemp[&quot;{#CTLID}&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>26A69A</color>
                                    <item>
                                        <host>Template LSI JSON LLD</host>
                                        <key>lsi.ctl.cv.temp[&quot;{#CTLID}&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Template LSI JSON LLD</host>
                                        <key>lsi.ctl.bbu.temp[&quot;{#CTLID}&quot;]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#CTLID}</lld_macro>
                            <path>$.Ctl</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>CHECK_JSON_ERROR</type>
                            <params>$['Controllers'][0]['Command Status']['Detailed Status'][0]['ErrMsg']</params>
                        </step>
                        <step>
                            <type>JSONPATH</type>
                            <params>$['Controllers'][0]['Response Data']['System Overview']</params>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Logical disks discovery</name>
                    <type>DEPENDENT</type>
                    <key>lsi.ld.lld</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) access</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.access[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['Access']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) cache</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.cache[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['Cache']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) CacheCade</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.cac[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['Cac']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) consistency</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.consist[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['Consist']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(Yes)}=0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{str(Yes)}=1</recovery_expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} logical disk &quot;{#LDNAME}&quot; [{#LDID}] consistency is &quot;{ITEM.LASTVALUE}&quot;</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) DG/VD</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.dgvd[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['DG/VD']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) level</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.level[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['TYPE']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) scheduled check consistency</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.scc[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['sCC']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) size</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.size[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['Size']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; logical disk &quot;{#LDNAME}&quot; ({#LDID}) state</name>
                            <type>DEPENDENT</type>
                            <key>lsi.ld.state[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['{#LDID}'][0]['State']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <params>switch(value)
{
case 'Optl':
value='Optimal';
break;
case 'OfLn':
value='Offline';
break;
case 'Pdgd':
value='Partially degraded';
break;
case 'Dgrd':
value='Degraded';
break;
case 'Rec':
value='Recovery';
break;
}
return value</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.ld.info</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(Optimal)}=0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{str(Optimal)}=1</recovery_expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} logical disk &quot;{#LDNAME}&quot; [{#LDID}] state is &quot;{ITEM.LASTVALUE}&quot; (HW)</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>lsi.ld.info</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#CTLID}</lld_macro>
                            <path>$.CTLID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#LDID}</lld_macro>
                            <path>$.LDID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#LDNAME}</lld_macro>
                            <path>$.Name</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <params>var i=0;
var NeedData = [];
var JsonValue = JSON.parse(value);
var Controllers = JsonValue.Controllers;
for (var keyC in Controllers) {
  var ResponseStatus=JsonValue.Controllers[keyC]['Command Status']['Status'];
  if (ResponseStatus.match(/Success/g)) {  	
		var ResponseData = JsonValue.Controllers[keyC]['Response Data'];
		for (var key in ResponseData) {
			if (key.match(/\/c\d{1,}\/v\d{1,}/g)) {
	 		 	JsonValue.Controllers[keyC]['Response Data'][key][0]['LDID'] = key;
	 		 	JsonValue.Controllers[keyC]['Response Data'][key][0]['CTLID'] = keyC;
	 		 	NeedData[i] = JsonValue.Controllers[keyC]['Response Data'][key][0];
	 		 	i = i + 1;
			}
    }
  	
  }
}
return JSON.stringify(NeedData)</params>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>{$LD_THROTTLING_HB_PERIOD}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Physical disks discovery</name>
                    <type>DEPENDENT</type>
                    <key>lsi.pd.lld</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) disk info</name>
                            <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            <delay>{$PD_REQUEST_PERIOD}</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) DriveGroup</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.dg[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['DG']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) DID-Device ID</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.did[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['DID']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) Enclosure Device ID : Slot No</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.eid[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['EID:Slt']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) firmware</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.fw[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} Device attributes']['Firmware Revision']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{diff()}=1</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] firmware was changed</name>
                                    <priority>INFO</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) interface</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.intf[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Intf']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) media error count</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.media.error.count[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Media Error Count']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{change()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] media error</name>
                                    <priority>INFO</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) media type</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.med[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Med']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) model</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.model[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Model']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) name</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.name[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['EID:Slt']</params>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <params>^(.*)$
{#PDNAME}</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) other error count</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.other.error.count[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Other Error Count']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{change()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] other error</name>
                                    <priority>INFO</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) protection info</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.pi[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['PI']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) predictive failure count</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.predictive.failure.count[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Predictive Failure Count']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] predictive failure</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) self encryptive drive</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.sed[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['SED']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) sector size</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.sesz[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['SeSz']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) shield counter</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.shield.counter[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Shield Counter']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) size</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.size[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Size']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) S.M.A.R.T alert flag</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.smart.alert.flag[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['S.M.A.R.T alert flagged by drive']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(No)}=0 and {strlen()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] S.M.A.R.T alert flag {ITEM.LASTVALUE} (HW)</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) serial number</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.sn[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} Device attributes']['SN']</params>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <params><![CDATA[ ]]></params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) spun</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.spun[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Sp']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <params>switch(value)
{
case 'Onln':
value='Online';
break;
case 'UGood':
value='Unconfigured-Good';
break;
case 'UBad':
value='Unconfigured-Bad';
break;
case 'Msng':
value='Missing';
break;
case 'Offln':
value='Offline';
break;
case 'GHS':
value='Global Hot Spare';
break;
case 'DHS':
value='Dedicated Hot Spare';
break;
case 'Rbld':
value='Rebuild';
break;
case 'U':
value='Up';
break;
case 'D':
value='Down/PowerSave';
break;
case 'T':
value='Transition';
break;
case 'F':
value='Foreign';
break;
case 'UGUnsp':
value='Unsupported';
break;
case 'UGShld':
value='UnConfigured shielded';
break;
case 'HSPShld':
value='Hotspare shielded';
break;
case 'CFShld':
value='Configured shielded';
break;
case 'Cpybck':
value='CopyBack';
break;
case 'CBShld':
value='Copyback Shielded';
break;
}
return value</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) state</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.state[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['State']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <params>switch(value)
{
case 'Onln':
value='Online';
break;
case 'UGood':
value='Unconfigured-Good';
break;
case 'UBad':
value='Unconfigured-Bad';
break;
case 'Msng':
value='Missing';
break;
case 'Offln':
value='Offline';
break;
case 'GHS':
value='Global Hot Spare';
break;
case 'DHS':
value='Dedicated Hot Spare';
break;
case 'Rbld':
value='Rebuild';
break;
case 'U':
value='Up';
break;
case 'D':
value='Down/PowerSave';
break;
case 'T':
value='Transition';
break;
case 'F':
value='Foreign';
break;
case 'UGUnsp':
value='Unsupported';
break;
case 'UGShld':
value='UnConfigured shielded';
break;
case 'HSPShld':
value='Hotspare shielded';
break;
case 'CFShld':
value='Configured shielded';
break;
case 'Cpybck':
value='CopyBack';
break;
case 'CBShld':
value='Copyback Shielded';
break;
}
return value</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(Unconfigured-Bad)}=1 &#13;
or {str(Missing)}=1 &#13;
or {str(Offline)}=1 &#13;
or {str(Foreign)}=1&#13;
or {str(Failed)}=1&#13;
) &#13;
and {strlen()}&gt;0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{str(Unconfigured-Good)}=1 or {str(Online)}=1 or {str(Optimal)}=1 or {str(Spare)}=1</recovery_expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] state is &quot;{ITEM.LASTVALUE}&quot; (HW)</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) temp</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.temp[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <units>°C</units>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Drive Temperature']</params>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <params>^(.+)C.*$
\1</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$PD_TEMP_AVERAGE}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] temp average {ITEM.LASTVALUE} (HW)</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$PD_TEMP_CRIT}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] temp high {ITEM.LASTVALUE} (HW)</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$PD_TEMP_WARNING}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] temp warning {ITEM.LASTVALUE} (HW)</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) type</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.type[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Type']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <params>switch(value)
{
case 'Onln':
value='Online';
break;
case 'UGood':
value='Unconfigured-Good';
break;
case 'UBad':
value='Unconfigured-Bad';
break;
case 'Msng':
value='Missing';
break;
case 'Offln':
value='Offline';
break;
case 'GHS':
value='Global Hot Spare';
break;
case 'DHS':
value='Dedicated Hot Spare';
break;
case 'Rbld':
value='Rebuild';
break;
case 'U':
value='Up';
break;
case 'D':
value='Down/PowerSave';
break;
case 'T':
value='Transition';
break;
case 'F':
value='Foreign';
break;
case 'UGUnsp':
value='Unsupported';
break;
case 'UGShld':
value='UnConfigured shielded';
break;
case 'HSPShld':
value='Hotspare shielded';
break;
case 'CFShld':
value='Configured shielded';
break;
case 'Cpybck':
value='CopyBack';
break;
case 'CBShld':
value='Copyback Shielded';
break;
}
return value</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.info</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>lsi.pd.info</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#CTLID}</lld_macro>
                            <path>$.CTLID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#CTLPDID}</lld_macro>
                            <path>$.CTLPDID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#EID}</lld_macro>
                            <path>$.['EID:Slt']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#PDID}</lld_macro>
                            <path>$.PDID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#PDNAME}</lld_macro>
                            <path>$.PDNAME</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <params>var i=0;
var NeedData = [];
var JsonValue = JSON.parse(value);
var Controllers = JsonValue.Controllers;
for (var keyC in Controllers) {
	if (JsonValue.Controllers[keyC]['Response Data'] &amp;&amp; JsonValue.Controllers[keyC]['Response Data']['Drive Information']) {
		var DriveInformation = JsonValue.Controllers[keyC]['Response Data']['Drive Information'];
		for (var key in DriveInformation) {       
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['PDID'] = i;
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['PDNAME'] = '/c' + keyC + '/e' + JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['EID:Slt'].replace(':','/s');
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['CTLPDID'] = key;
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['CTLID'] = keyC;
 		 	NeedData[i] = JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key];
 		 	i = i + 1;
		}
	}
}
return JSON.stringify(NeedData)</params>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>{$PD_THROTTLING_HB_PERIOD}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Physical disks ne discovery</name>
                    <type>DEPENDENT</type>
                    <key>lsi.pd.ne.lld</key>
                    <delay>0</delay>
                    <description>ne=No Enclosure&#13;
Disks without Enclosure or Backplane</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) disk info</name>
                            <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            <delay>{$PD_REQUEST_PERIOD}</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) DriveGroup</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.dg[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['DG']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) DID-Device ID</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.did[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['DID']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) Enclosure Device ID : Slot No</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.eid[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['EID:Slt']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) firmware</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.fw[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} Device attributes']['Firmware Revision']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{diff()}=1</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] firmware was changed</name>
                                    <priority>INFO</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) interface</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.intf[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Intf']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) media error count</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.media.error.count[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Media Error Count']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{change()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] media error</name>
                                    <priority>INFO</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) media type</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.med[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Med']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) model</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.model[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Model']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) name</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.name[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['EID:Slt']</params>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <params>^(.*)$
{#PDNAME}</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) other error count</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.other.error.count[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Other Error Count']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{change()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] other error</name>
                                    <priority>INFO</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) protection info</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.pi[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['PI']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) predictive failure count</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.predictive.failure.count[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Predictive Failure Count']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] predictive failure</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) self encryptive drive</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.sed[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['SED']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) sector size</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.sesz[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['SeSz']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) shield counter</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.shield.counter[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Shield Counter']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) size</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.size[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Size']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) S.M.A.R.T alert flag</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.smart.alert.flag[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['S.M.A.R.T alert flagged by drive']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(No)}=0 and {strlen()}&gt;0</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] S.M.A.R.T alert flag {ITEM.LASTVALUE} (HW)</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) serial number</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.sn[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} Device attributes']['SN']</params>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <params><![CDATA[ ]]></params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) spun</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.spun[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Sp']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <params>switch(value)
{
case 'Onln':
value='Online';
break;
case 'UGood':
value='Unconfigured-Good';
break;
case 'UBad':
value='Unconfigured-Bad';
break;
case 'Msng':
value='Missing';
break;
case 'Offln':
value='Offline';
break;
case 'GHS':
value='Global Hot Spare';
break;
case 'DHS':
value='Dedicated Hot Spare';
break;
case 'Rbld':
value='Rebuild';
break;
case 'U':
value='Up';
break;
case 'D':
value='Down/PowerSave';
break;
case 'T':
value='Transition';
break;
case 'F':
value='Foreign';
break;
case 'UGUnsp':
value='Unsupported';
break;
case 'UGShld':
value='UnConfigured shielded';
break;
case 'HSPShld':
value='Hotspare shielded';
break;
case 'CFShld':
value='Configured shielded';
break;
case 'Cpybck':
value='CopyBack';
break;
case 'CBShld':
value='Copyback Shielded';
break;
}
return value</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) state</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.state[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['State']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <params>switch(value)
{
case 'Onln':
value='Online';
break;
case 'UGood':
value='Unconfigured-Good';
break;
case 'UBad':
value='Unconfigured-Bad';
break;
case 'Msng':
value='Missing';
break;
case 'Offln':
value='Offline';
break;
case 'GHS':
value='Global Hot Spare';
break;
case 'DHS':
value='Dedicated Hot Spare';
break;
case 'Rbld':
value='Rebuild';
break;
case 'U':
value='Up';
break;
case 'D':
value='Down/PowerSave';
break;
case 'T':
value='Transition';
break;
case 'F':
value='Foreign';
break;
case 'UGUnsp':
value='Unsupported';
break;
case 'UGShld':
value='UnConfigured shielded';
break;
case 'HSPShld':
value='Hotspare shielded';
break;
case 'CFShld':
value='Configured shielded';
break;
case 'Cpybck':
value='CopyBack';
break;
case 'CBShld':
value='Copyback Shielded';
break;
}
return value</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(Unconfigured-Bad)}=1 &#13;
or {str(Unconfigured-Good)}=1 &#13;
or {str(Missing)}=1 &#13;
or {str(Offline)}=1 &#13;
or {str(Foreign)}=1&#13;
or {str(Failed)}=1&#13;
) &#13;
and {strlen()}&gt;0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{str(Unconfigured-Good)}=1 or {str(Online)}=1</recovery_expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] state is &quot;{ITEM.LASTVALUE}&quot; (HW)</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) temp</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.temp[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TREND_PERIOD}</trends>
                            <units>°C</units>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDNAME} - Detailed Information']['Drive {#PDNAME} State']['Drive Temperature']</params>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <params>^(.+)C.*$
\1</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.all.info[&quot;{#PDNAME}&quot;]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$PD_TEMP_AVERAGE}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] temp average {ITEM.LASTVALUE} (HW)</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$PD_TEMP_CRIT}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] temp high {ITEM.LASTVALUE} (HW)</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$PD_TEMP_WARNING}</expression>
                                    <name>{HOST.NAME}: LSI controller {#CTLID} physical disk &quot;{#PDID}&quot; [{#EID}] temp warning {ITEM.LASTVALUE} (HW)</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; physical disk &quot;{#PDID}&quot; ({#EID}) type</name>
                            <type>DEPENDENT</type>
                            <key>lsi.pd.ne.type[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Drive Information'][{#CTLPDID}]['Type']</params>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <params>switch(value)
{
case 'Onln':
value='Online';
break;
case 'UGood':
value='Unconfigured-Good';
break;
case 'UBad':
value='Unconfigured-Bad';
break;
case 'Msng':
value='Missing';
break;
case 'Offln':
value='Offline';
break;
case 'GHS':
value='Global Hot Spare';
break;
case 'DHS':
value='Dedicated Hot Spare';
break;
case 'Rbld':
value='Rebuild';
break;
case 'U':
value='Up';
break;
case 'D':
value='Down/PowerSave';
break;
case 'T':
value='Transition';
break;
case 'F':
value='Foreign';
break;
case 'UGUnsp':
value='Unsupported';
break;
case 'UGShld':
value='UnConfigured shielded';
break;
case 'HSPShld':
value='Hotspare shielded';
break;
case 'CFShld':
value='Configured shielded';
break;
case 'Cpybck':
value='CopyBack';
break;
case 'CBShld':
value='Copyback Shielded';
break;
}
return value</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>lsi.pd.ne.info</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>lsi.pd.ne.info</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#CTLID}</lld_macro>
                            <path>$.CTLID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#CTLPDID}</lld_macro>
                            <path>$.CTLPDID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#EID}</lld_macro>
                            <path>$.['EID:Slt']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#PDID}</lld_macro>
                            <path>$.PDID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#PDNAME}</lld_macro>
                            <path>$.PDNAME</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <params>var i=0;
var NeedData = [];
var JsonValue = JSON.parse(value);
var Controllers = JsonValue.Controllers;
for (var keyC in Controllers) {
	if (JsonValue.Controllers[keyC]['Response Data'] &amp;&amp; JsonValue.Controllers[keyC]['Response Data']['Drive Information']) {
		var DriveInformation = JsonValue.Controllers[keyC]['Response Data']['Drive Information'];
		for (var key in DriveInformation) {       
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['PDID'] = i;
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['PDNAME'] = '/c' + keyC + JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['EID:Slt'].trim().replace(':','/s');
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['CTLPDID'] = key;
 		 	JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key]['CTLID'] = keyC;
 		 	NeedData[i] = JsonValue.Controllers[keyC]['Response Data']['Drive Information'][key];
 		 	i = i + 1;
		}
	}
}
return JSON.stringify(NeedData)</params>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>{$PD_THROTTLING_HB_PERIOD}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$ADAP_BBU_TEMP_AVERAGE}</macro>
                    <value>40</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_BBU_TEMP_CRIT}</macro>
                    <value>45</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_BBU_TEMP_WARNING}</macro>
                    <value>35</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_CACHE_TEMP_AVERAGE}</macro>
                    <value>50</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_CACHE_TEMP_CRIT}</macro>
                    <value>55</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_CACHE_TEMP_WARNING}</macro>
                    <value>45</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_DISCOVERY_PERIOD}</macro>
                    <value>1h</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$ADAP_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$ADAP_REQUEST_PERIOD}</macro>
                    <value>10m</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$ADAP_ROC_TEMP_AVERAGE}</macro>
                    <value>80</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_ROC_TEMP_CRIT}</macro>
                    <value>90</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_ROC_TEMP_WARNING}</macro>
                    <value>70</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$ADAP_THROTTLING_HB_PERIOD}</macro>
                    <value>3h</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$ADAP_TREND_PERIOD}</macro>
                    <value>180d</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$BATTERY_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$BATTERY_REQUEST_PERIOD}</macro>
                    <value>10m</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$BATTERY_TREND_PERIOD}</macro>
                    <value>180d</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$INTERNAL_ITEMS_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$LD_DISCOVERY_PERIOD}</macro>
                    <value>10m</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$LD_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$LD_REQUEST_PERIOD}</macro>
                    <value>10m</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$LD_THROTTLING_HB_PERIOD}</macro>
                    <value>3h</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$PD_DISCOVERY_PERIOD}</macro>
                    <value>10m</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$PD_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$PD_REQUEST_PERIOD}</macro>
                    <value>10m</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$PD_TEMP_AVERAGE}</macro>
                    <value>50</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$PD_TEMP_CRIT}</macro>
                    <value>55</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$PD_TEMP_WARNING}</macro>
                    <value>45</value>
                    <description>°C</description>
                </macro>
                <macro>
                    <macro>{$PD_THROTTLING_HB_PERIOD}</macro>
                    <value>3h</value>
                    <description>time</description>
                </macro>
                <macro>
                    <macro>{$PD_TREND_PERIOD}</macro>
                    <value>180d</value>
                    <description>time</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
